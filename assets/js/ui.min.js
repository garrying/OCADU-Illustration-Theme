$(function(){var c=$("body"),e=$("html, body"),m=$("#app-head"),q=$("#colophon"),f=$("#year-widget"),n=$("#year-select"),g=$("#s"),p=$("#progress"),h=$("#intro"),j=$(".sticky"),r=$(".nav-next a"),s=$(".nav-previous a"),t=function(){45<m.height()?m.addClass("double"):m.removeClass("double")};t();$("#info").hover(function(){$("#search, .year-widget-toggle").animate({opacity:0});$(this).html("\u261c");q.animate({opacity:1})},function(){q.animate({opacity:0});$(this).html("\u270c");$("#search, .year-widget-toggle").animate({opacity:1})});
$.fn.teletype=function(a){var b=this,d=$.extend({animDelay:150},a);$.each(d.text.split(""),function(a,c){setTimeout(function(){b.attr("placeholder",b.attr("placeholder")+c)},d.animDelay*a)});return this};var u=document.querySelector(".gallery"),k;c.hasClass("single")&&imagesLoaded(u,function(){k=new Packery(u,{itemSelector:".gallery-item",gutter:5})});$(".year-widget-toggle").on("click",function(){"true"===f.attr("data-visible")?($(this).find(".indicator").removeClass("visible"),f.attr("data-visible",
"false"),n.addClass("collapsed"),$.cookie("currentlyVisible","false",{path:"/"})):($(this).find(".indicator").addClass("visible"),f.attr("data-visible","true"),n.removeClass("collapsed"),$.cookie("currentlyVisible","true",{path:"/"}))});"false"===$.cookie("currentlyVisible")&&(f.attr("data-visible","false"),$(this).find(".indicator").removeClass("visible"),n.addClass("collapsed"));setTimeout(function(){if(c.hasClass("home")||c.hasClass("error404"))g.teletype({text:"...Search The Archive"});else if(c.hasClass("single")&&
$("article").hasClass("illustrator")){var a=$("h1").text();g.teletype({text:" \u25cf "+a})}else c.hasClass("archive")&&$("#illu-jumpmenu a").hasClass("selected")&&(a=$("#illu-jumpmenu .selected").text(),g.teletype({text:" \u25cf "+a}))},6E3);$.fn.shuffle=function(){var a=this.get(),b=$.map(a,function(){var d=Math.floor(Math.random()*a.length),b=$(a[d]).clone(!0)[0];a.splice(d,1);return b});this.each(function(a){$(this).replaceWith($(b[a]))});return $(b)};c.hasClass("home")&&$("#content article").shuffle();
$.fn.spin=function(a){this.each(function(){var b=$(this).data();b.spinner&&(b.spinner.stop(),delete b.spinner);!1!==a&&(b.spinner=(new Spinner($.extend({color:"#3EBB94",width:5,radius:50,length:0},a))).spin(this))});return this};p.spin();h.on("click",function(){$(this).fadeOut("fast").addClass("hidden")});var l=function(){var a=$(window).scrollTop(),b=$(window).height(),d=j.height();70<=a&&d<b?j.addClass("fixed"):j.removeClass("fixed");c.hasClass("home")&&(1<$(window).scrollTop()||!1!==h.hasClass("hidden")?
h.fadeOut("fast"):h.fadeIn("fast"))};window.addEventListener?window.addEventListener("scroll",l,!1):window.attachEvent&&window.attachEvent("onscroll",l);$(".gallery-icon a").on("click",function(){if($(this).parent().parent().hasClass("enlarge"))return $(this).parent().parent().removeClass("enlarge"),$(this).find("img").attr("title","Click to View"),k.layout(),!1;var a=$(this).attr("href");$(".gallery-item").removeClass("enlarge");$(".gallery-icon a").removeClass("active");$(this).find("img").attr("title",
"Click to Minimize");$(this).addClass("active");var b=$("<img />").attr("src",a);$(this).find("img").load(a,function(){if(!this.complete||"undefined"===typeof this.naturalWidth||0===this.naturalWidth)alert("Image failed to load. Try again.");else{var a=b[0].src;$(this).attr("src",a).attr("width","").attr("height","").parent().parent().parent().addClass("enlarge");a=document.querySelector(".gallery");imagesLoaded(a,function(){k.layout()})}});k.on("layoutComplete",function(){var a=$(".active").offset();
e.animate({scrollTop:a.top-20},90)});return!1});$(".enlarge").on("click",function(){$(this).find("img").remove()});l=function(){e.animate({scrollTop:0},400)};if(c.hasClass("single"))j.find("h1").on("click",l);$(document.documentElement).keyup(function(a){37===a.keyCode&&s.length?window.location=s.attr("href"):39===a.keyCode&&r.length&&(window.location=r.attr("href"))});window.onload=function(){c.hasClass("home")&&(document.getElementById("s").focus(),$(".illustrator img").each(function(a){$(this).delay(150*
a).animate({opacity:1,marginTop:0},500,function(){$(this).parent().addClass("visible")})}));g.on("focus",function(){$(this).attr("placeholder","Search for an Illustrator")});$(".gallery").find("img").fadeTo("fast",1,function(){p.spin(!1)});p.spin(!1)};e.bind("mousedown DOMMouseScroll mousewheel keyup",function(){e.stop()});$(window).resize(function(){t()})});