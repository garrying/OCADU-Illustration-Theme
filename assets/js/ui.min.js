$(function(){var c=$("body"),f=$("html, body"),n=$("#app-head"),q=$("#colophon"),g=$("#year-widget"),p=$("#year-select"),h=$("#s"),e=$("#progress"),j=$("#intro"),k=$(".sticky"),r=$(".nav-next a"),s=$(".nav-previous a"),t=function(){45<n.height()?n.addClass("double"):n.removeClass("double")};t();$("#info").hover(function(){$("#search, .year-widget-toggle").animate({opacity:0});$(this).html("\u261c");q.animate({opacity:1})},function(){q.animate({opacity:0});$(this).html("\u270c");$("#search, .year-widget-toggle").animate({opacity:1})});
$.fn.teletype=function(a){var b=this,d=$.extend({animDelay:150},a);$.each(d.text.split(""),function(a,c){setTimeout(function(){b.attr("placeholder",b.attr("placeholder")+c)},d.animDelay*a)});return this};var u=document.querySelector(".gallery"),l;c.hasClass("single")&&imagesLoaded(u,function(){l=new Packery(u,{itemSelector:".gallery-item",gutter:5})});$(".year-widget-toggle").on("click",function(){"true"===g.attr("data-visible")?($(this).find(".indicator").removeClass("visible"),g.attr("data-visible",
"false"),p.addClass("collapsed"),$.cookie("currentlyVisible","false",{path:"/"})):($(this).find(".indicator").addClass("visible"),g.attr("data-visible","true"),p.removeClass("collapsed"),$.cookie("currentlyVisible","true",{path:"/"}))});"false"===$.cookie("currentlyVisible")&&(g.attr("data-visible","false"),$(this).find(".indicator").removeClass("visible"),p.addClass("collapsed"));setTimeout(function(){if(c.hasClass("home")||c.hasClass("error404"))h.teletype({text:"...Search The Archive"});else if(c.hasClass("single")&&
$("article").hasClass("illustrator")){var a=$("h1").text();h.teletype({text:" \u25cf "+a})}else c.hasClass("archive")&&$("#illu-jumpmenu a").hasClass("selected")&&(a=$("#illu-jumpmenu .selected").text(),h.teletype({text:" \u25cf "+a}))},6E3);$.fn.shuffle=function(){var a=this.get(),b=$.map(a,function(){var d=Math.floor(Math.random()*a.length),b=$(a[d]).clone(!0)[0];a.splice(d,1);return b});this.each(function(a){$(this).replaceWith($(b[a]))});return $(b)};c.hasClass("home")&&$("#content article").shuffle();
$.fn.spin=function(a){this.each(function(){var b=$(this).data();b.spinner&&(b.spinner.stop(),delete b.spinner);!1!==a&&(b.spinner=(new Spinner($.extend({color:"#3EBB94",width:5,radius:50,length:0},a))).spin(this))});return this};e.spin();j.on("click",function(){$(this).fadeOut("fast").addClass("hidden")});var m=function(){var a=$(window).scrollTop(),b=$(window).height(),d=k.height();70<=a&&d<b?k.addClass("fixed"):k.removeClass("fixed");c.hasClass("home")&&(1<$(window).scrollTop()||!1!==j.hasClass("hidden")?
j.fadeOut("fast"):j.fadeIn("fast"))};window.addEventListener?window.addEventListener("scroll",m,!1):window.attachEvent&&window.attachEvent("onscroll",m);$(".gallery-icon a").on("click",function(){e.spin({color:"#000",radius:9,width:4,left:0,top:0,lines:9}).css({"z-index":1E3,right:20,width:30,bottom:20,height:30,top:"inherit"});if($(this).parent().parent().hasClass("enlarge"))return $(this).parent().parent().removeClass("enlarge"),$(this).find("img").attr("title","Click to View"),l.layout(),!1;var a=
$(this).attr("href");$(".gallery-item").removeClass("enlarge");$(".gallery-icon a").removeClass("active");$(this).find("img").attr("title","Click to Minimize");$(this).addClass("active");var b=$("<img />").attr("src",a);$(this).find("img").load(a,function(){if(!this.complete||"undefined"===typeof this.naturalWidth||0===this.naturalWidth)alert("Image failed to load. Try again.");else{var a=b[0].src;$(this).attr("src",a).attr("width","").attr("height","").parent().parent().parent().addClass("enlarge");
a=document.querySelector(".gallery");imagesLoaded(a,function(){l.layout()})}});l.on("layoutComplete",function(){var a=$(".active").offset();f.animate({scrollTop:a.top-20},90);e.spin(!1).css({"z-index":-1})});return!1});$(".enlarge").on("click",function(){$(this).find("img").remove()});m=function(){f.animate({scrollTop:0},400)};if(c.hasClass("single"))k.find("h1").on("click",m);$(document.documentElement).keyup(function(a){37===a.keyCode&&s.length?window.location=s.attr("href"):39===a.keyCode&&r.length&&
(window.location=r.attr("href"))});window.onload=function(){c.hasClass("home")&&(document.getElementById("s").focus(),$(".illustrator img").each(function(a){$(this).delay(150*a).animate({opacity:1,marginTop:0},500,function(){$(this).parent().addClass("visible")})}));h.on("focus",function(){$(this).attr("placeholder","Search for an Illustrator")});$(".gallery").find("img").fadeTo("fast",1,function(){e.spin(!1)});e.spin(!1)};f.bind("mousedown DOMMouseScroll mousewheel keyup",function(){f.stop()});$(window).resize(function(){t()})});